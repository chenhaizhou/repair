{"version":3,"sources":["webpack:///./src/views/Profile.vue?10d8","webpack:///./node_modules/vant/es/cell/style/index.js","webpack:///./src/views/Profile.vue?0290","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?d064","webpack:///./src/views/Profile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","avatar","_v","_s","user","name","roleNames","office","mobile","on","logout","_e","_m","staticRenderFns","data","showLogout","components","computed","mounted","getUser","methods","localStorage","removeItem","$router","push","withCredentials","setItem","JSON","stringify","res","body","roleEnNames","console","log","err","component"],"mappings":"2GAAA,yBAAiiB,EAAG,G,2DCApiB,yC,yCCAA,I,EAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMP,EAAIQ,YAAYJ,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIS,GAAGT,EAAIU,GAAGV,EAAIW,KAAKC,WAAWR,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiB,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,KAAK,MAAQP,EAAIW,KAAKE,aAAaT,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,OAAO,MAAQP,EAAIW,KAAKG,OAAOF,QAAQR,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,OAAO,MAAQP,EAAIW,KAAKI,WAAW,GAAIf,EAAc,WAAEI,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,IAAIS,GAAG,CAAC,MAAQhB,EAAIiB,SAAS,CAACjB,EAAIS,GAAG,WAAW,GAAGT,EAAIkB,MAAM,GAAGlB,EAAImB,GAAG,MAC1sBC,EAAkB,CAAC,WAAa,IAAIpB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACA,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,MAAM,CAACP,EAAIS,GAAG,YAAYT,EAAIS,GAAG,sB,uJC2BxM,GACEY,KADF,WAEI,MAAO,CACLC,YAAY,EACZX,KAAM,CACJG,OAAQ,MAIdS,YAAF,sBACA,YADA,yBAEA,YAFA,yBAGA,YAHA,yBAIA,YAJA,WAMEC,SAAU,CACRhB,OAAQ,WACN,OAAO,EAAb,uBAGEiB,QApBF,WAqBIxB,KAAKyB,WAEPC,QAAS,CACPV,OADJ,WAEMW,aAAaC,WAAW,QACxB5B,KAAK6B,QAAQC,KAAK,MAEpBL,QALJ,WAKA,WACA,+BACM,EAAN,wEACQM,iBAAR,IACA,kBACQ,EAAR,sBACQJ,aAAaK,QAAQ,OAAQC,KAAKC,UAAUC,EAAIf,KAAKgB,KAAK1B,OAC1DiB,aAAaK,QAAQ,QAA4C,eAAnCG,EAAIf,KAAKgB,KAAK1B,KAAK2B,aACjD,EAAR,sEACA,mBACQC,QAAQC,IAAIC,SClE6T,I,wBCQ7UC,EAAY,eACd,EACA3C,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E","file":"js/profile.85ac43ae.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&id=51d43e01&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&id=51d43e01&lang=scss&scoped=true&\"","import '../../style/base.css';\nimport '../../info/index.css';\nimport '../../icon/index.css';\nimport '../index.css';","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile\"},[_c('div',{staticClass:\"user\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.avatar}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.user.name))])]),_c('div',{staticClass:\"info\"},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"身份\",\"value\":_vm.user.roleNames}}),_c('van-cell',{attrs:{\"title\":\"所属部门\",\"value\":_vm.user.office.name}}),_c('van-cell',{attrs:{\"title\":\"联系方式\",\"value\":_vm.user.mobile}})],1),(_vm.showLogout)?_c('div',{staticClass:\"btn\"},[_c('van-button',{attrs:{\"type\":\"danger\",\"block\":\"\"},on:{\"click\":_vm.logout}},[_vm._v(\"退出登录\")])],1):_vm._e()],1),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"copy\"},[_c('p',[_c('a',{attrs:{\"href\":\"/\"}},[_vm._v(\"渭南师范学院\")]),_vm._v(\" © 2019-2025\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"profile\">\n    <div class=\"user\">\n      <div class=\"avatar\">\n        <img :src=\"avatar\" />\n      </div>\n      <div class=\"name\">{{user.name}}</div>\n    </div>\n    <div class=\"info\">\n      <van-cell-group>\n        <van-cell title=\"身份\" :value=\"user.roleNames\" />\n        <van-cell title=\"所属部门\" :value=\"user.office.name\" />\n        <van-cell title=\"联系方式\" :value=\"user.mobile\" />\n      </van-cell-group>\n      <div class=\"btn\" v-if=\"showLogout\">\n        <van-button type=\"danger\" @click=\"logout\" block>退出登录</van-button>\n      </div>\n    </div>\n    <div class=\"copy\">\n      <p><a href=\"/\">渭南师范学院</a> &copy; 2019-2025</p>\n    </div>\n  </div>\n</template>\n<script>\nimport {Icon, Cell, CellGroup, Button} from 'vant'\nimport axios from 'axios'\nimport {apiHost} from '../config'\n\nexport default {\n  data() {\n    return {\n      showLogout: false,\n      user: {\n        office: {},\n      }\n    }\n  },\n  components: {\n    [Icon.name]: Icon,\n    [Cell.name]: Cell,\n    [CellGroup.name]: CellGroup,\n    [Button.name]: Button,\n  },\n  computed: {\n    avatar: function() {\n      return apiHost + this.user.photo\n    }\n  },\n  mounted() {\n    this.getUser()\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem('auth');\n      this.$router.push('/')\n    },\n    getUser() {\n      const uid = localStorage.getItem('auth')\n      axios.get(`${apiHost}/repair/a/wechat/api/userById?uid=${uid}`, {\n        withCredentials:true\n      }).then(res => {\n        this.user = res.data.body.user\n        localStorage.setItem('user', JSON.stringify(res.data.body.user));\n        localStorage.setItem('admin', res.data.body.user.roleEnNames !== 'commonUser');\n        this.$emit('updateIsAdmin', res.data.body.user.roleEnNames !== 'commonUser')\n      }).catch(err => {\n        console.log(err)\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n  .user {\n    padding: 32px;\n  }\n  .avatar {\n    width: 96px;\n    height: 96px;\n    margin: 16px auto;\n    background-color: #f8f8f8;\n    border-radius: 50%;\n    img {\n      max-height: 100%;\n      max-width: 100%;\n    }\n  }\n  .name {\n    text-align: center;\n  }\n  .van-cell__title {\n    text-align: left;\n  }\n  .info {\n    margin: 8px;\n  }\n  .copy {\n    margin-top: 16px;\n    color: #999;\n    font-size: 12px;\n    text-align: center;\n    a {\n      color: #3ca2e0;\n    }\n  }\n  .btn {\n    margin: 16px 0;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=51d43e01&scoped=true&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&id=51d43e01&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51d43e01\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}